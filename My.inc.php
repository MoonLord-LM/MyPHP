<?php
//更新时间：2015.3.12
//include('My.php');
//include('My.inc.php');
date_default_timezone_set('PRC');mb_internal_encoding("UTF-8");ignore_user_abort(true);function MySuccess($a,$b){SuccessReport($a,$b);$c=array("result"=>"success","data"=>$a,"description"=>$b);$c=MyJson_decode($c);die($c);}define('Exception_Parameter_Missing','参数丢失');define('Exception_Parameter_Empty','参数为空值');define('Exception_Parameter_NotNumeric','参数不是数值');define('Exception_Parameter_NotBoolean','参数不是布尔值');define('Exception_Parameter_NotTinyInt','参数不是0或1');define('Exception_Parameter_NotInteger','参数不是整数');define('Exception_Parameter_NotDigit','参数不是数字');define('Exception_Parameter_NotLongDigit','参数不是指定长度的数字');define('Exception_Parameter_NotAlphaNumeric','参数不是数字或字母');define('Exception_Parameter_NotFixedAlphaNumeric','参数不是指定长度的数字或字母');define('Exception_Parameter_NotTime','参数不是时间');define('Exception_Parameter_NotFixedTime','参数不是指定范围的时间');define('Exception_Parameter_NotDigitJsonArray','参数不是数字组成的JSON数组');define('Exception_Parameter_NotLong','参数不是指定字节长度的字符串');define('Exception_Parameter_NotLongCharacter','参数不是指定字符个数的字符串');define('Exception_Parameter_NotLongEnglish','参数不是指定字符个数的英文字符串');define('Exception_Parameter_NotLongChinese','参数不是指定字符个数的中文字符串');define('Exception_Parameter_NotFixedLong','参数不是指定字节长度的字符串');define('Exception_Parameter_NotFixedLongCharacter','参数不是指定字符个数的字符串');define('Exception_Parameter_NotFixedLongEnglish','参数不是指定字符个数的英文字符串');define('Exception_Parameter_NotFixedLongChinese','参数不是指定字符个数的中文字符串');define('Exception_OptionalParameter_Empty','可选参数为空值');define('Exception_OptionalParameter_NotNumeric','可选参数不是数值');define('Exception_OptionalParameter_NotBoolean','可选参数不是布尔值');define('Exception_OptionalParameter_NotTinyInt','可选参数不是0或1');define('Exception_OptionalParameter_NotInteger','可选参数不是整数');define('Exception_OptionalParameter_NotDigit','可选参数不是数字');define('Exception_OptionalParameter_NotLongDigit','可选参数不是指定长度的数字');define('Exception_OptionalParameter_NotAlphaNumeric','可选参数不是数字或字母');define('Exception_OptionalParameter_NotFixedAlphaNumeric','可选参数不是指定长度的数字或字母');define('Exception_OptionalParameter_NotTime','可选参数不是时间');define('Exception_OptionalParameter_NotFixedTime','可选参数不是指定范围的时间');define('Exception_OptionalParameter_NotDigitJsonArray','可选参数不是数字组成的JSON数组');define('Exception_OptionalParameter_NotLong','可选参数不是指定字节长度的字符串');define('Exception_OptionalParameter_NotLongCharacter','可选参数不是指定字符个数的字符串');define('Exception_OptionalParameter_NotLongEnglish','可选参数不是指定字符个数的英文字符串');define('Exception_OptionalParameter_NotLongChinese','可选参数不是指定字符个数的中文字符串');define('Exception_OptionalParameter_NotFixedLong','可选参数不是指定字节长度的字符串');define('Exception_OptionalParameter_NotFixedLongCharacter','可选参数不是指定字符个数的字符串');define('Exception_OptionalParameter_NotFixedLongEnglish','可选参数不是指定字符个数的英文字符串');define('Exception_OptionalParameter_NotFixedLongChinese','可选参数不是指定字符个数的中文字符串');function MyException($d,$b){ExceptionReport($d,$b);switch($d){case  Exception_Parameter_Missing:$b='Http参数【'.$b.'】的值必须设置，此次请求未设置这个参数';break;case  Exception_Parameter_Empty:$b='Http参数【'.$b.'】的值必须设置为非零非空的值，此次请求这个参数的值为0，或者为空字符串';break;case  Exception_Parameter_NotNumeric:$b='Http参数【'.$b.'】的值必须设置为数值，此次请求这个参数的值不是数值';break;case  Exception_Parameter_NotBoolean:$b='Http参数【'.$b.'】的值必须设置为true或false，此次请求这个参数的值不是true或false';break;case  Exception_Parameter_NotTinyInt:$b='Http参数【'.$b.'】的值必须设置为0或1，此次请求这个参数的值不是0或1';break;case  Exception_Parameter_NotInteger:$b='Http参数【'.$b.'】的值必须设置为-2147483648到2147483647的整数，此次请求这个参数的值不是-2147483648到2147483647的整数';break;case  Exception_Parameter_NotDigit:$b='Http参数【'.$b.'】的值必须设置为数字0-9构成的非空字符串，此次请求这个参数的值不是数字0-9构成的非空字符串';break;case  Exception_Parameter_NotLongDigit:$b='Http参数【'.$b[0].'】的值必须设置为数字0-9构成的'.$b[1].'位字符串，此次请求这个参数的值不是数字0-9构成的'.$b[1].'位字符串';break;case  Exception_Parameter_NotAlphaNumeric:$b='Http参数【'.$b.'】的值必须设置为字母和数字构成的非空字符串，此次请求这个参数的值不是字母和数字构成的非空字符串';break;case  Exception_Parameter_NotFixedAlphaNumeric:$b='Http参数【'.$b[0].'】的值必须设置为字母和数字构成的不少于'.$b[1].'位，不多于'.$b[2].'位的非空字符串，此次请求这个参数的值不是字母和数字构成的不少于'.$b[1].'位，不多于'.$b[2].'位的非空字符串';break;case  Exception_Parameter_NotTime:$b='Http参数【'.$b.'】的值必须设置为标准时间字符串，此次请求这个参数的值不是标准时间字符串';break;case  Exception_Parameter_NotFixedTime:$b='Http参数【'.$b[0].'】的值必须设置为不早于'.$b[1].'，不晚于'.$b[2].'的标准时间字符串，此次请求这个参数的值不是不早于'.$b[1].'，不晚于'.$b[2].'的标准时间字符串';break;case  Exception_Parameter_NotDigitJsonArray:$b='Http参数【'.$b.'】的值必须设置为数字0-9构成的非空字符串的JSON数组，此次请求这个参数的值不是数字0-9构成的非空字符串的JSON数组';break;case  Exception_Parameter_NotLong:$b='Http参数【'.$b[0].'】的值必须设置为字节个数为'.$b[1].'的字符串，此次请求这个参数的值不是字节个数为'.$b[1].'的字符串';break;case  Exception_Parameter_NotLongCharacter:$b='Http参数【'.$b[0].'】的值必须设置为中英文字符个数为'.$b[1].'的字符串，此次请求这个参数的值不是中英文字符个数为'.$b[1].'的字符串';break;case  Exception_Parameter_NotLongEnglish:$b='Http参数【'.$b[0].'】的值必须设置为纯英文字符个数为'.$b[1].'的字符串，此次请求这个参数的值不是纯英文字符个数为'.$b[1].'的字符串';break;case  Exception_Parameter_NotLongChinese:$b='Http参数【'.$b[0].'】的值必须设置为纯中文字符个数为'.$b[1].'的字符串，此次请求这个参数的值不是纯中文字符个数为'.$b[1].'的字符串';break;case  Exception_Parameter_NotFixedLong:$b='Http参数【'.$b[0].'】的值必须设置为字节个数为不少于'.$b[1].'个，不多于'.$b[2].'个的字符串，此次请求这个参数的值不是字节个数为不少于'.$b[1].'个，不多于'.$b[2].'个的字符串';break;case  Exception_Parameter_NotFixedLongCharacter:$b='Http参数【'.$b[0].'】的值必须设置为中英文的字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的字符串，此次请求这个参数的值不是中英文字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的字符串';break;case  Exception_Parameter_NotFixedLongEnglish:$b='Http参数【'.$b[0].'】的值必须设置为字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的纯英文的字符串，此次请求这个参数的值不是字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的纯英文的字符串';break;case  Exception_Parameter_NotFixedLongChinese:$b='Http参数【'.$b[0].'】的值必须设置为字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的纯中文的字符串，此次请求这个参数的值不是字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的纯中文的字符串';break;case  Exception_OptionalParameter_Empty:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为非零非空的值，此次请求这个参数的值为0，或者为空字符串';break;case  Exception_OptionalParameter_NotNumeric:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为数值，此次请求这个参数的值不是数值';break;case  Exception_OptionalParameter_NotBoolean:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为true或false，此次请求这个参数的值不是true或false';break;case  Exception_OptionalParameter_NotTinyInt:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为0或1，此次请求这个参数的值不是0或1';break;case  Exception_OptionalParameter_NotInteger:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为-2147483648到2147483647的整数，此次请求这个参数的值不是-2147483648到2147483647的整数';break;case  Exception_OptionalParameter_NotDigit:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为数字0-9构成的非空字符串，此次请求这个参数的值不是数字0-9构成的非空字符串';break;case  Exception_OptionalParameter_NotLongDigit:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为数字0-9构成的'.$b[1].'位字符串，此次请求这个参数的值不是数字0-9构成的'.$b[1].'位字符串';break;case  Exception_OptionalParameter_NotAlphaNumeric:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为字母和数字构成的非空字符串，此次请求这个参数的值不是字母和数字构成的非空字符串';break;case  Exception_OptionalParameter_NotFixedAlphaNumeric:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为字母和数字构成的不少于'.$b[1].'位，不多于'.$b[2].'位的非空字符串，此次请求这个参数的值不是字母和数字构成的不少于'.$b[1].'位，不多于'.$b[2].'位的非空字符串';break;case  Exception_OptionalParameter_NotTime:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为标准时间字符串，此次请求这个参数的值不是标准时间字符串';break;case  Exception_OptionalParameter_NotFixedTime:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为不早于'.$b[1].'，不晚于'.$b[2].'的标准时间字符串，此次请求这个参数的值不是不早于'.$b[1].'，不晚于'.$b[2].'的标准时间字符串';break;case  Exception_OptionalParameter_NotDigitJsonArray:$b='可选Http参数【'.$b.'】的值要么不设置，要么必须设置为数字0-9构成的非空字符串的JSON数组，此次请求这个参数的值不是数字0-9构成的非空字符串的JSON数组';break;case  Exception_OptionalParameter_NotLong:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为字节个数为'.$b[1].'的字符串，此次请求这个参数的值不是字节个数为'.$b[1].'的字符串';break;case  Exception_OptionalParameter_NotLongCharacter:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为中英文字符个数为'.$b[1].'的字符串，此次请求这个参数的值不是中英文字符个数为'.$b[1].'的字符串';break;case  Exception_OptionalParameter_NotLongEnglish:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为纯英文字符个数为'.$b[1].'的字符串，此次请求这个参数的值不是纯英文字符个数为'.$b[1].'的字符串';break;case  Exception_OptionalParameter_NotLongChinese:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为纯中文字符个数为'.$b[1].'的字符串，此次请求这个参数的值不是纯中文字符个数为'.$b[1].'的字符串';break;case  Exception_OptionalParameter_NotFixedLong:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为字节个数为不少于'.$b[1].'个，不多于'.$b[2].'个的字符串，此次请求这个参数的值不是字节个数为不少于'.$b[1].'个，不多于'.$b[2].'个的字符串';break;case  Exception_OptionalParameter_NotFixedLongCharacter:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为中英文的字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的字符串，此次请求这个参数的值不是中英文字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的字符串';break;case  Exception_OptionalParameter_NotFixedLongEnglish:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的纯英文的字符串，此次请求这个参数的值不是字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的纯英文的字符串';break;case  Exception_OptionalParameter_NotFixedLongChinese:$b='可选Http参数【'.$b[0].'】的值要么不设置，要么必须设置为字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的纯中文的字符串，此次请求这个参数的值不是字符个数为不少于'.$b[1].'个，不多于'.$b[2].'个的纯中文的字符串';break;default:}$c=array("result"=>"exception","type"=>$d,"description"=>$b);$c=MyJson_decode($c);die($c);}define('Error_PhpFunction_MistakenlyUsed','PHP函数调用错误');function MyError($d,$b){ErrorReport($d,$b);switch($d){case  Error_PhpFunction_MistakenlyUsed:$b='PHP函数'.$b;break;default:}$c=array("result"=>"error","code"=>$d,"description"=>$b);$c=MyJson_decode($c);die($c);}function SuccessReport($a,$b){$e=debug_backtrace();$f=count($e);unset($e[0]);unset($e[1]);}function ExceptionReport($d,$b){$e=debug_backtrace();$f=count($e);unset($e[0]);unset($e[1]);var_dump($e);}function ErrorReport($d,$b){$e=debug_backtrace();$f=count($e);unset($e[0]);unset($e[1]);var_dump($e);}function MyCompleteURL(){return $_SERVER['HTTP_HOST'].':'.$_SERVER['SERVER_PORT'].$_SERVER['REQUEST_URI'];}function MyPhpURL(){if(strpos($_SERVER['REQUEST_URI'],"?")!=false){return $_SERVER['HTTP_HOST'].':'.$_SERVER['SERVER_PORT'].substr($_SERVER['REQUEST_URI'],0,strpos($_SERVER['REQUEST_URI'],"?"));}return $_SERVER['HTTP_HOST'].':'.$_SERVER['SERVER_PORT'].$_SERVER['REQUEST_URI'];}function SetValue($g,$h){global${$g};${$g}=$h;}function SetPost($g){global${$g};${$g}=$_POST[$g];}function SetPostFloat($g){global${$g};${$g}=(float)$_POST[$g];}function SetPostInteger($g){global${$g};${$g}=(int)$_POST[$g];}function SetPostDate($g){global${$g};${$g}=date('Y-m-d H:i:s',strtotime($_POST[$g]));}function SetPostBoolean($g){global${$g};if(strtolower($_POST[$g])==='true'){${$g}=true;}else{${$g}=false;}}function SetPostTinyInt($g){global${$g};if($_POST[$g]==='1'){${$g}=1;}else{${$g}=0;}}function SetGet($g){global${$g};${$g}=$_GET[$g];}function SetGetFloat($g){global${$g};${$g}=(float)$_GET[$g];}function SetGetInteger($g){global${$g};${$g}=(int)$_GET[$g];}function SetGetDate($g){global${$g};${$g}=date('Y-m-d H:i:s',strtotime($_GET[$g]));}function SetGetBoolean($g){global${$g};if(strtolower($_GET[$g])==='true'){${$g}=true;}else{${$g}=false;}}function SetGetTinyInt($g){global${$g};if($_GET[$g]==='1'){${$g}=1;}else{${$g}=0;}}function CheckSetDefault($g){if(!isset($_POST[$g])&&!isset($_GET[$g])){global${$g};${$g}='';return true;}return false;}function CheckSetDefaultFloat($g){if(!isset($_POST[$g])&&!isset($_GET[$g])){global${$g};${$g}=(float)0;return true;}return false;}function CheckSetDefaultInteger($g){if(!isset($_POST[$g])&&!isset($_GET[$g])){global${$g};${$g}=(int)0;return true;}return false;}function CheckSetDefaultDate($g){if(!isset($_POST[$g])&&!isset($_GET[$g])){global${$g};${$g}=date('Y-m-d H:i:s',0);return true;}return false;}function CheckSetDefaultBoolean($g){if(!isset($_POST[$g])&&!isset($_GET[$g])){global${$g};${$g}=false;return true;}return false;}function CheckSetDefaultArray($g){if(!isset($_POST[$g])&&!isset($_GET[$g])){global${$g};${$g}=array();return true;}return false;}function ExistCheck($g){if(!isset($_POST[$g])&&!isset($_GET[$g])){MyException(Exception_Parameter_Missing,$g);}}function LengthCheck($j,$k,$l){if(!isset($l)||!is_numeric($l)||(int) $l!=(float) $l||(int) $l<1){MyError(Error_PhpFunction_MistakenlyUsed,$j.'的参数'.$k.'必须为正整数，此次调用这个PHP函数，参数'.$k.'的值为【'.$l.'】');}}function TimeCheck($j,$m,$n){if(!isset($n)||strtotime($n)===false&&strtotime($n)===-1){MyError(Error_PhpFunction_MistakenlyUsed,$j.'的参数'.$m.'必须为表示时间的字符串，此次调用这个PHP函数，参数'.$m.'的值为【'.$n.'】');}}function ArrayCheck($j,$o,$p){if(!isset($p)||!is_array($p)){MyError(Error_PhpFunction_MistakenlyUsed,$j.'的参数'.$o.'必须为数组，此次调用这个PHP函数，参数'.$o.'的值为【'.$p.'】');}}function FunctionCheck($j,$q,$r){if(!isset($r)||!function_exists($r)){MyError(Error_PhpFunction_MistakenlyUsed,$j.'的参数'.$q.'必须为已经定义的函数的名称，此次调用这个PHP函数，参数'.$q.'的值为【'.$r.'】');}}function StringCheck($j,$s,$t){if(!isset($t)){MyError(Error_PhpFunction_MistakenlyUsed,$j.'的参数'.$s.'必须为非空字符串，此次调用这个PHP函数，参数'.$s.'的值未设置');}if($t===""){MyError(Error_PhpFunction_MistakenlyUsed,$j.'的参数'.$s.'必须为非空字符串，此次调用这个PHP函数，参数'.$s.'的值为空字符串');}if(!is_string($t)){MyError(Error_PhpFunction_MistakenlyUsed,$j.'的参数'.$s.'必须为非空字符串，此次调用这个PHP函数，参数'.$s.'的值不是字符串');}}function MyCheck($u,$q,$v=array()){ArrayCheck(__FUNCTION__,'$ParameterNameArray',$u);ArrayCheck(__FUNCTION__,'$FunctionParameterArray',$v);FunctionCheck(__FUNCTION__,'$FunctionName',$q);for($w=1;$w<count($v);$w++){$v[$w]=$v[$w-1];}for($w=0;$w<count($u);$w++){$v[0]=$u[$w];call_user_func_array($q,$v);}}function MyMustExist($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(isset($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])){SetGet($g);return;}MyException(Exception_Parameter_Missing,$g);}function MyMustNotEmpty($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(!empty($_POST[$g])){SetPost($g);return;}if(!empty($_GET[$g])){SetGet($g);return;}MyException(Exception_Parameter_Empty,$g);}function MyMustNumeric($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(isset($_POST[$g])&&is_numeric($_POST[$g])){SetPostFloat($g);return;}if(isset($_GET[$g])&&is_numeric($_GET[$g])){SetGetFloat($g);return;}MyException(Exception_Parameter_NotNumeric,$g);}function MyMustBoolean($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(isset($_POST[$g])&&(strtolower($_POST[$g])==='true'||strtolower($_POST[$g])==='false')){SetPostBoolean($g);return;}if(isset($_GET[$g])&&(strtolower($_GET[$g])==='true'||strtolower($_GET[$g])==='false')){SetGetBoolean($g);return;}MyException(Exception_Parameter_NotBoolean,$g);}function MyMustTinyInt($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(isset($_POST[$g])&&($_POST[$g]==='0'||$_POST[$g]==='1')){SetPostTinyInt($g);return;}if(isset($_GET[$g])&&($_GET[$g]==='0'||$_GET[$g]==='1')){SetGetTinyInt($g);return;}MyException(Exception_Parameter_NotTinyInt,$g);}function MyMustInteger($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(isset($_POST[$g])&&is_numeric($_POST[$g])&&(int) $_POST[$g]==(float) $_POST[$g]){SetPostInteger($g);return;}if(isset($_GET[$g])&&is_numeric($_GET[$g])&&(int) $_GET[$g]==(float) $_GET[$g]){SetGetInteger($g);return;}MyException(Exception_Parameter_NotInteger,$g);}function MyMustDigit($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&ctype_digit($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&ctype_digit($_GET[$g])){SetGet($g);return;}MyException(Exception_Parameter_NotDigit,$g);}function MyMustLongDigit($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&ctype_digit($_POST[$g])&&strlen($_POST[$g])==$l){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&ctype_digit($_GET[$g])&&strlen($_GET[$g])==$l){SetGet($g);return;}MyException(Exception_Parameter_NotLongDigit,array($g,$l));}function MyMustAlphaNumeric($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&ctype_alnum($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&ctype_alnum($_GET[$g])){SetGet($g);return;}MyException(Exception_Parameter_NotAlphaNumeric,$g);}function MyMustFixedAlphaNumeric($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&ctype_alnum($_POST[$g])&&strlen($_POST[$g])>=$x&&strlen($_POST[$g])<=$y){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&ctype_alnum($_GET[$g])&&strlen($_GET[$g])>=$x&&strlen($_GET[$g])<=$y){SetGet($g);return;}MyException(Exception_Parameter_NotFixedAlphaNumeric,array($g,$x,$y));}function MyMustBeTime($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(isset($_POST[$g])&&strtotime($_POST[$g])!==false&&strtotime($_POST[$g])!==-1){SetPostDate($g);return;}if(isset($_GET[$g])&&strtotime($_GET[$g])!==false&&strtotime($_GET[$g])!==-1){SetGetDate($g);return;}MyException(Exception_Parameter_NotTime,$g);}function MyMustBeFixedTime($g,$z,$aa){StringCheck(__FUNCTION__,'$ParameterName',$g);TimeCheck(__FUNCTION__,'$MinTime',$z);TimeCheck(__FUNCTION__,'$MaxTime',$aa);ExistCheck($g);if(isset($_POST[$g])&&strtotime($_POST[$g])!==false&&strtotime($_POST[$g])!==-1&&strtotime($_POST[$g])>=strtotime($z)&&strtotime($_POST[$g])<=strtotime($aa)){SetPostDate($g);return;}if(isset($_GET[$g])&&strtotime($_GET[$g])!==false&&strtotime($_GET[$g])!==-1&&strtotime($_GET[$g])>=strtotime($z)&&strtotime($_GET[$g])<=strtotime($aa)){SetGetDate($g);return;}MyException(Exception_Parameter_NotFixedAlphaNumeric,array($g,$x,$y));}function MyMustDigitJsonArray($g){StringCheck(__FUNCTION__,'$ParameterName',$g);ExistCheck($g);if(isset($_POST[$g])&&json_decode($_POST[$g],true)!==null&&json_decode($_POST[$g],true)!==false){$bb=json_decode($_POST[$g],true);for($w=0;$w<count($bb);$w++){if($bb[$w]===''||!ctype_digit((string)$bb[$w])){MyException(Exception_Parameter_NotDigitJsonArray,$g);}}Set($g,$bb);return;}if(isset($_GET[$g])&&json_decode($_GET[$g],true)!==null&&json_decode($_GET[$g],true)!==false){$bb=json_decode($_GET[$g],true);for($w=0;$w<count($bb);$w++){if($bb[$w]===''||!ctype_digit((string)$bb[$w])){MyException(Exception_Parameter_NotDigitJsonArray,$g);}}Set($g,$bb);return;}MyException(Exception_Parameter_NotDigitJsonArray,$g);}function MyMustLong($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&strlen($_POST[$g])==$l){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&strlen($_GET[$g])==$l){SetGet($g);return;}MyException(Exception_Parameter_NotLong,array($g,$l));}function MyMustLongCharacter($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&mb_strlen($_POST[$g])==$l){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&mb_strlen($_GET[$g])==$l){SetGet($g);return;}MyException(Exception_Parameter_NotLongCharacter,array($g,$l));}function MyMustLongEnglish($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&strlen($_POST[$g])==$l&&strlen($_POST[$g])===mb_strlen($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&strlen($_GET[$g])==$l&&strlen($_GET[$g])===mb_strlen($_GET[$g])){SetGet($g);return;}MyException(Exception_Parameter_NotLongEnglish,array($g,$l));}function MyMustLongChinese($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&mb_strlen($_POST[$g])==$l&&(float)strlen($_POST[$g])/3===(float)mb_strlen($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&mb_strlen($_GET[$g])==$l&&(float)strlen($_GET[$g])/3===(float)mb_strlen($_GET[$g])){SetGet($g);return;}MyException(Exception_Parameter_NotLongChinese,array($g,$l));}function MyMustFixedLong($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&strlen($_POST[$g])>=$x&&strlen($_POST[$g])<=$y){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&strlen($_GET[$g])>=$x&&strlen($_GET[$g])<=$y){SetGet($g);return;}MyException(Exception_Parameter_NotFixedLong,array($g,$x,$y));}function MyMustFixedLongCharacter($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&mb_strlen($_POST[$g])>=$x&&mb_strlen($_POST[$g])<=$y){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&mb_strlen($_GET[$g])>=$x&&mb_strlen($_GET[$g])<=$y){SetGet($g);return;}MyException(Exception_Parameter_NotFixedLongCharacter,array($g,$x,$y));}function MyMustFixedLongEnglish($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&strlen($_POST[$g])>=$x&&strlen($_POST[$g])<=$y&&strlen($_POST[$g])===mb_strlen($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&strlen($_GET[$g])>=$x&&strlen($_GET[$g])<=$y&&strlen($_GET[$g])===mb_strlen($_GET[$g])){SetGet($g);return;}MyException(Exception_Parameter_NotFixedLongEnglish,array($g,$x,$y));}function MyMustFixedLongChinese($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);ExistCheck($g);if(isset($_POST[$g])&&$_POST[$g]!==''&&mb_strlen($_POST[$g])>=$x&&mb_strlen($_POST[$g])<=$y&&(float)strlen($_POST[$g])/3===(float)mb_strlen($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&mb_strlen($_GET[$g])>=$x&&mb_strlen($_GET[$g])<=$y&&(float)strlen($_GET[$g])/3===(float)mb_strlen($_GET[$g])){SetGet($g);return;}MyException(Exception_Parameter_NotFixedLongChinese,array($g,$x,$y));}function MyCanExist($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])){SetGet($g);return;}}function MyCanNotEmpty($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefault($g)===true){return;}if(!empty($_POST[$g])){SetPost($g);return;}if(!empty($_GET[$g])){SetGet($g);return;}MyException(Exception_OptionalParameter_Empty,$g);}function MyCanNumeric($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefaultFloat($g)===true){return;}if(isset($_POST[$g])&&is_numeric($_POST[$g])){SetPostFloat($g);return;}if(isset($_GET[$g])&&is_numeric($_GET[$g])){SetGetFloat($g);return;}MyException(Exception_OptionalParameter_NotNumeric,$g);}function MyCanBoolean($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefaultBoolean($g)===true){return;}if(isset($_POST[$g])&&(strtolower($_POST[$g])==='true'||strtolower($_POST[$g])==='false')){SetPostBoolean($g);return;}if(isset($_GET[$g])&&(strtolower($_GET[$g])==='true'||strtolower($_GET[$g])==='false')){SetGetBoolean($g);return;}MyException(Exception_OptionalParameter_NotBoolean,$g);}function MyCanTinyInt($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefaultInteger($g)===true){return;}if(isset($_POST[$g])&&($_POST[$g]==='0'||$_POST[$g]==='1')){SetPostTinyInt($g);return;}if(isset($_GET[$g])&&($_GET[$g]==='0'||$_GET[$g]==='1')){SetGetTinyInt($g);return;}MyException(Exception_OptionalParameter_NotTinyInt,$g);}function MyCanInteger($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefaultInteger($g)===true){return;}if(isset($_POST[$g])&&is_numeric($_POST[$g])&&(int) $_POST[$g]==(float) $_POST[$g]){SetPostInteger($g);return;}if(isset($_GET[$g])&&is_numeric($_GET[$g])&&(int) $_GET[$g]==(float) $_GET[$g]){SetGetInteger($g);return;}MyException(Exception_OptionalParameter_NotInteger,$g);}function MyCanDigit($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&ctype_digit($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&ctype_digit($_GET[$g])){SetGet($g);return;}MyException(Exception_OptionalParameter_NotDigit,$g);}function MyCanLongDigit($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&ctype_digit($_POST[$g])&&strlen($_POST[$g])==$l){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&ctype_digit($_GET[$g])&&strlen($_GET[$g])==$l){SetGet($g);return;}MyException(Exception_OptionalParameter_NotLongDigit,array($g,$l));}function MyCanAlphaNumeric($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&ctype_alnum($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&ctype_alnum($_GET[$g])){SetGet($g);return;}MyException(Exception_OptionalParameter_NotAlphaNumeric,$g);}function MyCanFixedAlphaNumeric($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&ctype_alnum($_POST[$g])&&strlen($_POST[$g])>=$x&&strlen($_POST[$g])<=$y){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&ctype_alnum($_GET[$g])&&strlen($_GET[$g])>=$x&&strlen($_GET[$g])<=$y){SetGet($g);return;}MyException(Exception_OptionalParameter_NotFixedAlphaNumeric,array($g,$x,$y));}function MyCanBeTime($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefaultDate($g)===true){return;}if(isset($_POST[$g])&&strtotime($_POST[$g])!==false&&strtotime($_POST[$g])!==-1){SetPostDate($g);return;}if(isset($_GET[$g])&&strtotime($_GET[$g])!==false&&strtotime($_GET[$g])!==-1){SetGetDate($g);return;}MyException(Exception_OptionalParameter_NotTime,$g);}function MyCanBeFixedTime($g,$z,$aa){StringCheck(__FUNCTION__,'$ParameterName',$g);TimeCheck(__FUNCTION__,'$MinTime',$z);TimeCheck(__FUNCTION__,'$MaxTime',$aa);if(CheckSetDefaultDate($g)===true){return;}if(isset($_POST[$g])&&strtotime($_POST[$g])!==false&&strtotime($_POST[$g])!==-1&&strtotime($_POST[$g])>=strtotime($z)&&strtotime($_POST[$g])<=strtotime($aa)){SetPostDate($g);return;}if(isset($_GET[$g])&&strtotime($_GET[$g])!==false&&strtotime($_GET[$g])!==-1&&strtotime($_GET[$g])>=strtotime($z)&&strtotime($_GET[$g])<=strtotime($aa)){SetGetDate($g);return;}MyException(Exception_OptionalParameter_NotFixedAlphaNumeric,array($g,$x,$y));}function MyCanDigitJsonArray($g){StringCheck(__FUNCTION__,'$ParameterName',$g);if(CheckSetDefaultArray($g)===true){return;}if(isset($_POST[$g])&&json_decode($_POST[$g],true)!==null&&json_decode($_POST[$g],true)!==false){$bb=json_decode($_POST[$g],true);for($w=0;$w<count($bb);$w++){if($bb[$w]===''||!ctype_digit((string)$bb[$w])){MyException(Exception_OptionalParameter_NotDigitJsonArray,$g);}}Set($g,$bb);return;}if(isset($_GET[$g])&&json_decode($_GET[$g],true)!==null&&json_decode($_GET[$g],true)!==false){$bb=json_decode($_GET[$g],true);for($w=0;$w<count($bb);$w++){if($bb[$w]===''||!ctype_digit((string)$bb[$w])){MyException(Exception_OptionalParameter_NotDigitJsonArray,$g);}}Set($g,$bb);return;}MyException(Exception_OptionalParameter_NotDigitJsonArray,$g);}function MyCanLong($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&strlen($_POST[$g])==$l){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&strlen($_GET[$g])==$l){SetGet($g);return;}MyException(Exception_OptionalParameter_NotLong,array($g,$l));}function MyCanLongCharacter($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&mb_strlen($_POST[$g])==$l){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&mb_strlen($_GET[$g])==$l){SetGet($g);return;}MyException(Exception_OptionalParameter_NotLongCharacter,array($g,$l));}function MyCanLongEnglish($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&strlen($_POST[$g])==$l&&strlen($_POST[$g])===mb_strlen($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&strlen($_GET[$g])==$l&&strlen($_GET[$g])===mb_strlen($_GET[$g])){SetGet($g);return;}MyException(Exception_OptionalParameter_NotLongEnglish,array($g,$l));}function MyCanLongChinese($g,$l){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$Length',$l);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&mb_strlen($_POST[$g])==$l&&(float)strlen($_POST[$g])/3===(float)mb_strlen($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&mb_strlen($_GET[$g])==$l&&(float)strlen($_GET[$g])/3===(float)mb_strlen($_GET[$g])){SetGet($g);return;}MyException(Exception_OptionalParameter_NotLongChinese,array($g,$l));}function MyCanFixedLong($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&strlen($_POST[$g])>=$x&&strlen($_POST[$g])<=$y){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&strlen($_GET[$g])>=$x&&strlen($_GET[$g])<=$y){SetGet($g);return;}MyException(Exception_OptionalParameter_NotFixedLong,array($g,$x,$y));}function MyCanFixedLongCharacter($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&mb_strlen($_POST[$g])>=$x&&mb_strlen($_POST[$g])<=$y){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&mb_strlen($_GET[$g])>=$x&&mb_strlen($_GET[$g])<=$y){SetGet($g);return;}MyException(Exception_OptionalParameter_NotFixedLongCharacter,array($g,$x,$y));}function MyCanFixedLongEnglish($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&strlen($_POST[$g])>=$x&&strlen($_POST[$g])<=$y&&strlen($_POST[$g])===mb_strlen($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&strlen($_GET[$g])>=$x&&strlen($_GET[$g])<=$y&&strlen($_GET[$g])===mb_strlen($_GET[$g])){SetGet($g);return;}MyException(Exception_OptionalParameter_NotFixedLongEnglish,array($g,$x,$y));}function MyCanFixedLongChinese($g,$x,$y){StringCheck(__FUNCTION__,'$ParameterName',$g);LengthCheck(__FUNCTION__,'$MinLength',$x);LengthCheck(__FUNCTION__,'$MaxLength',$y);if(CheckSetDefault($g)===true){return;}if(isset($_POST[$g])&&$_POST[$g]!==''&&mb_strlen($_POST[$g])>=$x&&mb_strlen($_POST[$g])<=$y&&(float)strlen($_POST[$g])/3===(float)mb_strlen($_POST[$g])){SetPost($g);return;}if(isset($_GET[$g])&&$_GET[$g]!==''&&mb_strlen($_GET[$g])>=$x&&mb_strlen($_GET[$g])<=$y&&(float)strlen($_GET[$g])/3===(float)mb_strlen($_GET[$g])){SetGet($g);return;}MyException(Exception_OptionalParameter_NotFixedLongChinese,array($g,$x,$y));}function MyUrlBase64_encode($a){return rtrim(strtr(base64_encode($a),'+/','-_'),'=');}function MyUrlBase64_decode($a){return base64_decode(str_pad(strtr($a,'-_','+/'),strlen($a)%4,'=',STR_PAD_RIGHT));}function ArrayUrl_encode($a){if(is_array($a)){foreach($a as $cc=>$dd){$a[urlencode($cc)]=ArrayUrl_encode($dd);}}else{$a=urlencode($a);}return $a;}function MyJson_decode($a){return urldecode(json_encode(ArrayUrl_encode($a)));}?>